# Руководство по развертыванию Perekyp System на Render.com

## 1. Подготовка
Убедитесь, что у вас есть аккаунт на [Render.com](https://render.com) и код загружен в репозиторий GitHub.

## 2. Автоматическое развертывание

1. **Создайте Web Service**:
   - В панели управления Render нажмите `New +` -> `Web Service`.
   - Подключите ваш GitHub репозиторий.

2. **Конфигурация**:
   - **Name**: `perekyp-system` (или любое другое)
   - **Region**: Frankfurt (или ближайший)
   - **Branch**: `main`
   - **Runtime**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn wsgi:app`

3. **Переменные окружения (Environment Variables)**:
   Добавьте следующие переменные в разделе `Environment`:
   - `PYTHON_VERSION`: `3.11.0` (или ваша версия)
   - `SECRET_KEY`: `(сгенерируйте сложный случайный ключ)`
   - `DATABASE_URL`: (Render создаст это автоматически, если вы добавите базу данных, см. ниже)

## 3. База данных (PostgreSQL)

Для надежности данных в продакшене используйте PostgreSQL:
1. Нажмите `New +` -> `PostgreSQL`.
2. Дайте имя базе данных.
3. Скопируйте `Internal Database URL`.
4. В настройках вашего Web Service добавьте переменную `DATABASE_URL` и вставьте скопированный URL.

*Примечание: При использовании SQLite (по умолчанию) данные будут стираться при каждом перезапуске сервера на бесплатном тарифе Render.*

## 4. Функционал

### Авторизация
- Перейдите по адресу вашего приложения `/register` для создания первого администратора.
- Используйте `/login` для входа.

### Мониторинг
- В `Dashboard` отображаются все клиенты, которые отправили "чек-ин".
- Клиенты отправляют данные на `/client_checkin`.

### Обновления
- Загрузите файл `update.zip` в корень проекта (или настройте S3 хранилище).
- Клиенты проверяют обновления через `/update_info`.

## 5. Администрирование

- **Логи**: Доступны в панели Render во вкладке "Logs".
- **Мониторинг**: Render автоматически перезапускает приложение при сбоях.
- **Бэкапы**: PostgreSQL на Render имеет автоматические ежедневные бэкапы (на платных тарифах) или можно настроить вручную.
